## 起動方法

```bash
cd annex/opentestfactory/docker
docker compose up
```

## 実行方法

```bash
set -a
. ./docker/.env
set +a

curl -H "Authorization: Bearer $TOKEN" http://127.0.0.1:24368/agents

curl -X POST --data-binary @workflow/hello.yml \
  -H "Authorization: Bearer ${TOKEN}" \
  -H "Content-type: application/x-yaml" \
  http://localhost:7774/workflows


# ↑戻り値の workflow_id を使って進捗/ログ確認
curl -H "Authorization: Bearer ${TOKEN}" \
  http://localhost:7775/workflows/<workflow_id>/status

curl -H "Authorization: Bearer ${TOKEN}" \
  http://localhost:7775/workflows/<workflow_id>/logs

# ワークフローの起動
pipenv run opentf-ctl --opentfconfig ./config  run workflow workflow/hello.yml

# 現在起動中のワークフローの一覧
pipenv run opentf-ctl --opentfconfig ./config get workflows

# 指定のワークフローのstatusを取得
pipenv run opentf-ctl --opentfconfig ./config get workflow 3aefbeca-0da3-41ff-9cfd-4fae2ac9059b

# 指定のワークフローをキャンセル
pipenv run opentf-ctl --opentfconfig ./config kill workflow 3aefbeca-0da3-41ff-9cfd-4fae2ac9059b

# ワークフロー添付ファイルの確認
pipenv run opentf-ctl get  --opentfconfig ./config attachments 3aefbeca-0da3-41ff-9cfd-4fae2ac9059b

# ワークフロー添付ファイルのダウンロード
pipenv run opentf-ctl --opentfconfig ./config cp "bfb3eff1-ffbe-423d-be7a-7f3c58547cbc:*" ./tmp

```

## 参考
https://opentestfactory.org/index.html
https://opentestfactory.org/installation.html

RESTAPIのエンドポイント
https://opentestfactory.org/services/endpoints.html